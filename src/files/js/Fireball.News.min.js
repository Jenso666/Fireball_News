if(!Fireball){var Fireball={}}Fireball.News={};Fireball.News.LabelSelection=Class.extend({_labelGroupIDsByCategory:{},_categoryIDsBylabelGroup:{},init:function(b){this._labelGroupIDsByCategory=b;var c,a=this;$.each(b,function(e,d){$.each(d,function(g,f){if(a._categoryIDsBylabelGroup[f]==undefined){a._categoryIDsBylabelGroup[f]={}}if(a._categoryIDsBylabelGroup[f][e]==undefined){a._categoryIDsBylabelGroup[f][e]=true}})});$("#newsAddabelSelectionContainer dl").each(function(d,f){c=$(f).find("> dd .labelList").data("objectID");for(var e in a._categoryIDsBylabelGroup[c]){if($('.jsCategoryList input[value="'+e+'"]').is(":checked")){continue}$(f).hide()}});$(".jsCategoryList input").each(function(d,e){$(e).click($.proxy(a._categoryChange,a))})},_categoryChange:function(c){var b,a=this;$("#newsAddabelSelectionContainer dl").each(function(d,f){b=$(f).find("> dd .labelList").data("objectID");for(var e in a._categoryIDsBylabelGroup[b]){if($('.jsCategoryList input[value="'+e+'"]').is(":checked")){$(f).show();continue}$(f).hide()}})}});Fireball.News.MarkAllAsRead=Class.extend({_proxy:null,init:function(){this._proxy=new WCF.Action.Proxy({success:$.proxy(this._success,this)});$(".markAllAsReadButton").click($.proxy(this._click,this))},_click:function(){this._proxy.setOption("data",{actionName:"markAllAsRead",className:"cms\\data\\news\\NewsAction"});this._proxy.sendRequest()},_success:function(){$("#mainMenu").find(".active .badge").hide();$(".newMessageBadge").hide()}});Fireball.News.Preview=WCF.Popover.extend({_proxy:null,_newss:{},init:function(){this._super(".newsLink");this._proxy=new WCF.Action.Proxy({showLoadingOverlay:false});WCF.DOMNodeInsertedHandler.addCallback("Fireball.News.Preview",$.proxy(this._initContainers,this))},_loadContent:function(){var a=$("#"+this._activeElementID);this._proxy.setOption("data",{actionName:"getNewsPreview",className:"cms\\data\\news\\NewsAction",objectIDs:[a.data("newsID")]});var c=this._activeElementID;var b=this;this._proxy.setOption("success",function(e,f,d){b._insertContent(c,e.returnValues.template,true)});this._proxy.sendRequest()}});Fireball.News.Like=WCF.Like.extend({_getContainers:function(){return $("article.message")},_getObjectID:function(a){return this._containers[a].data("newsID")},_buildWidget:function(b,a,e,d,f){var g=this._getWidgetContainer(b);if(this._canLike){var c=this._containers[b].find(".smallButtons");a.insertBefore(c.find(".toTopLink"));e.insertBefore(c.find(".toTopLink"));e.find("a").addClass("button");a.find("a").addClass("button")}if(f){f.appendTo(this._containers[b].find(".messageBody > .messageFooter"));f.addClass("messageFooterNote")}g.find(".permalink").after(d)},_getWidgetContainer:function(a){return this._containers[a].find(".messageHeader")},_addWidget:function(a,b){},_setActiveState:function(a,b,c){a=a.find(".button").removeClass("active");b=b.find(".button").removeClass("active");if(c==1){a.addClass("active")}else{if(c==-1){b.addClass("active")}}}});